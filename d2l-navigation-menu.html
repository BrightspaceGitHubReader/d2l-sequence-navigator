<link rel="import" href="../polymer-siren-mixins/siren-entity-mixin.html">
<link rel="import" href="./components/d2l-navigation-menu-item.html">
<!--
'd2l-navigation-menu'


@demo demo/index.html
-->

<dom-module id="d2l-navigation-menu">
	<template>
		<style>
			:host {
				display: block;
			}
			#menu {
				list-style:none;
				padding-left: 0px;
				margin-bottom: 0px;
				margin-top: 0px;
			}

		</style>
		<ul id="menu">
			<li>
				<d2l-accordion auto-close>
					<d2l-navigation-menu-item
						href="[[rootHref]]"
						token="[[token]]"
						current-activity="{{currentActivity}}"
						selected-module="{{selectedModule}}"
					></d2l-navigation-menu-item>
				</d2l-accordion>
			</li>
		</ul>
	</template>
	<script>
		/*
		@memberOf D2L.Polymer.Mixins;
		@mixes SirenEntityMixin
		*/
		class D2LNavigationMenu extends D2L.Polymer.Mixins.SirenEntityMixin( Polymer.Element ) {
			static get is() {
				return 'd2l-navigation-menu';
			}
			static get properties() {
				return {
					currentActivity: {
						type: String,
						value: '',
						notify: true
					},
					selectedModule: {
						type: String,
						value: ''
					},
					rootHref: {
						type: String,
						computed: '_fetchRootLink(entity)'
					}
				};
			}

			_fetchRootLink(entity) {
				return this._getLinkByRel( entity, 'self' ).href;
			}
		}

		window.customElements.define(D2LNavigationMenu.is, D2LNavigationMenu);
	</script>
</dom-module>
